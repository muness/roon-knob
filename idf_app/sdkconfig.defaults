CONFIG_WIFI_SSID="ROON_KNOB_AP"
CONFIG_WIFI_PASSWORD="rotary123"
CONFIG_EXAMPLE_IPV6=0
CONFIG_PARTITION_TABLE_CUSTOM=y
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME="partitions.csv"
CONFIG_PARTITION_TABLE_FILENAME="partitions.csv"
CONFIG_PARTITION_TABLE_OFFSET=0x8000
CONFIG_PARTITION_TABLE_MD5=y
CONFIG_ESPTOOLPY_FLASHSIZE_16MB=y
CONFIG_ESPTOOLPY_FLASHSIZE="16MB"

# PSRAM Configuration (required for artwork RGB565 buffers)
CONFIG_SPIRAM=y
CONFIG_SPIRAM_MODE_OCT=y
CONFIG_SPIRAM_SPEED_80M=y
CONFIG_SPIRAM_BOOT_INIT=y
CONFIG_SPIRAM_USE_MALLOC=y
CONFIG_SPIRAM_MALLOC_ALWAYSINTERNAL=16384
CONFIG_SPIRAM_TRY_ALLOCATE_WIFI_LWIP=y

# WiFi memory optimization (needed when BT is also enabled)
CONFIG_ESP_WIFI_STATIC_RX_BUFFER_NUM=6
CONFIG_ESP_WIFI_DYNAMIC_RX_BUFFER_NUM=16
CONFIG_ESP_WIFI_STATIC_TX_BUFFER_NUM=8
CONFIG_ESP_WIFI_TX_BUFFER_TYPE=1
CONFIG_ESP_WIFI_DYNAMIC_TX_BUFFER_NUM=16
CONFIG_ESP_WIFI_CACHE_TX_BUFFER_NUM=16
CONFIG_ESP_WIFI_RX_BA_WIN=6
CONFIG_ESP_WIFI_MGMT_SBUF_NUM=16

# Brownout detection - lower threshold for battery operation
# Level 4 (2.50V) allows WiFi current spikes without false triggers
# Level 7 (2.80V default) causes boot failures on battery due to WiFi inrush
CONFIG_ESP_BROWNOUT_DET=y
CONFIG_ESP_BROWNOUT_DET_LVL_SEL_4=y
CONFIG_ESP_BROWNOUT_DET_LVL=4
CONFIG_BROWNOUT_DET_LVL_SEL_4=y
CONFIG_ESP32S3_BROWNOUT_DET_LVL_SEL_4=y
CONFIG_BROWNOUT_DET_LVL=4
CONFIG_ESP32S3_BROWNOUT_DET_LVL=4

# LVGL JPEG Decoder - Disabled (using ESP_NEW_JPEG instead)
# CONFIG_LV_USE_TJPGD is not set

# LVGL Fonts (for larger, more readable text)
CONFIG_LV_FONT_MONTSERRAT_14=y
CONFIG_LV_FONT_MONTSERRAT_18=y
CONFIG_LV_FONT_MONTSERRAT_20=y
CONFIG_LV_FONT_MONTSERRAT_22=y
CONFIG_LV_FONT_MONTSERRAT_24=y
CONFIG_LV_FONT_MONTSERRAT_28=y
CONFIG_LV_FONT_MONTSERRAT_30=y
CONFIG_LV_FONT_MONTSERRAT_32=y
CONFIG_LV_FONT_MONTSERRAT_48=y

# Display Sleep Settings
CONFIG_RK_DISPLAY_DIM_TIMEOUT_SEC=30
CONFIG_RK_DISPLAY_SLEEP_TIMEOUT_SEC=60
CONFIG_RK_BACKLIGHT_NORMAL=100
CONFIG_RK_BACKLIGHT_DIM=25

# HTTP Server - larger header buffer for modern browsers
CONFIG_HTTPD_MAX_REQ_HDR_LEN=2048

# BLE HID Support (Bluetooth media controller)
CONFIG_ROON_KNOB_BLE_HID_ENABLED=y
CONFIG_ROON_KNOB_BLE_DEVICE_NAME="Roon Knob"
CONFIG_BT_ENABLED=y
CONFIG_BT_BLE_ENABLED=y
CONFIG_BT_BLUEDROID_ENABLED=y
CONFIG_BT_CONTROLLER_ENABLED=y
# Release classic BT memory (BLE only)
CONFIG_BT_CLASSIC_ENABLED=n
# GATT settings (required for HID) - reduced for memory
CONFIG_BT_GATTS_ENABLE=y
CONFIG_BT_GATTC_ENABLE=n
CONFIG_BT_GATT_MAX_SR_PROFILES=4
CONFIG_BT_GATT_MAX_SR_ATTRIBUTES=50
# BLE SMP (Security Manager Protocol) - bonding/pairing
CONFIG_BT_BLE_SMP_ENABLE=y
CONFIG_BT_SMP_ENABLE=y
CONFIG_BT_SMP_MAX_BONDS=5
CONFIG_BT_BLE_SMP_BOND_NVS_FLASH=y
# Enable BLE 4.2 features for legacy advertising API
CONFIG_BT_BLE_42_FEATURES_SUPPORTED=y
CONFIG_BT_BLE_42_ADV_EN=y
# Coexistence with WiFi
CONFIG_ESP_COEX_SW_COEXIST_ENABLE=y
# TX Power
CONFIG_BT_CTRL_DFT_TX_POWER_LEVEL_P9=y
# BT memory optimization (but not too aggressive - crashes if too small)
CONFIG_BT_BTC_TASK_STACK_SIZE=3072
CONFIG_BT_BTU_TASK_STACK_SIZE=4096
CONFIG_BT_ACL_CONNECTIONS=2
CONFIG_BT_CTRL_BLE_MAX_ACT=4
