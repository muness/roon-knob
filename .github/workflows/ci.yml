name: CI

# Quick checks for feature branches (not master/main)
# Full builds are handled by docker.yml for master/tags/PRs
on:
  push:
    branches-ignore: [master, main]
  pull_request:
    branches-ignore: [master, main]

jobs:
  build-pc:
    name: Build PC Simulator
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install dependencies
        run: |
          brew install --quiet cmake ninja sdl2 curl || true
      - name: Configure & build
        run: |
          cmake -S pc_sim -B build/pc_sim -G Ninja
          cmake --build build/pc_sim
      - name: JSON unit test
        run: python tests/test_json_parse.py
